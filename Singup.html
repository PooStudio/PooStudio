<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Application • POOSTUDIO</title>

  <link rel="icon" href="logo.png" type="image/png" />
  <link rel="apple-touch-icon" href="logo.png" />

  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Orbitron:wght@500;700;900&family=Inter:wght@300;400;500;600&display=swap" rel="stylesheet">
  <link rel="stylesheet" href="signupcss.css" />
</head>

<body>

<div id="loading-screen">
  <div class="loading-content">
    <h1 class="loading-title">POOSTUDIO</h1>
    <p class="loading-text">Loading APPLICATION...</p>
    <div class="loading-bar">
      <div class="loading-progress" id="progress"></div>
    </div>
    <p class="error-message" id="error-message">No Signal.<br>Reconnecting...</p>
    <button id="retry-btn" class="retry-button">RETRY MANUALLY</button>
  </div>
</div>

<div class="container" id="main-content">
  <h1 class="glow-text">DEV / MOD APPLICATION</h1>
  <p class="subtitle">We're looking for talented people. Tell us who you are and why you want to join POOSTUDIO.</p>

  <form id="application-form" action="https://formspree.io/f/mykkgpqq" method="POST">
    <div class="form-group">
      <label for="name">FULL NAME / NICKNAME</label>
      <input type="text" id="name" name="name" required placeholder="How should we call you?">
    </div>

    <div class="form-group">
      <label for="email">EMAIL ADDRESS</label>
      <input type="email" id="email" name="email" required placeholder="Where we can reach you">
    </div>

    <div class="form-group">
      <label for="role">ROLE YOU'RE APPLYING FOR</label>
      <select id="role" name="role" required>
        <option value="" disabled selected>Select role...</option>
        <option value="Developer">Developer</option>
        <option value="Moderator">Moderator</option>
        <option value="Both">Both (Dev + Mod)</option>
        <option value="Other">Other (please specify in message)</option>
      </select>
    </div>

    <div class="form-group">
      <label for="discord">DISCORD TAG (optional)</label>
      <input type="text" id="discord" name="discord" placeholder="username#0000 or @username">
    </div>

    <div class="form-group">
      <label for="experience">BRIEF EXPERIENCE / PORTFOLIO LINKS</label>
      <textarea id="experience" name="experience" rows="4" placeholder="Previous projects, skills, GitHub, past moderation experience, etc..."></textarea>
    </div>

    <div class="form-group">
      <label for="why">WHY SHOULD WE CHOOSE YOU? *</label>
      <textarea id="why" name="why" required rows="6" placeholder="Explain why you want to join POOSTUDIO and what makes you stand out."></textarea>
    </div>

    <button type="submit" class="btn" id="submit-btn">SUBMIT APPLICATION</button>
    <div class="status" id="status-success" role="status" aria-live="polite">Application sent successfully! We'll review it soon ✦</div>
    <div class="status" id="status-error" role="alert" aria-live="assertive">Something went wrong. Please try again or contact us directly.</div>
  </form>

  <!-- ===== FOOTER ===== -->
  <div class="site-footer">
    <div>© 2026 PooStudio</div>
    <div>
      <a href="privacy.html">Privacy</a> ·
      <a href="terms.html">Terms</a>
    </div>
  </div>
</div>

<!-- ===== HOME BUTTON ===== -->
<a href="index.html" class="home-button">HOME</a>

<script>
const loadingScreen = document.getElementById('loading-screen');
const mainContent   = document.getElementById('main-content');
const progress      = document.getElementById('progress');
const errorMessage  = document.getElementById('error-message');
const retryBtn      = document.getElementById('retry-btn');
const homeButton = document.querySelector('.home-button');

let progressValue = 0;
let hasFailed = false;
let loadingTimer;

function startLoading() {
  progressValue = 0;
  progress.style.width = '0%';
  errorMessage.classList.remove('visible');
  retryBtn.classList.remove('visible');
  hasFailed = false;

  // deterministic smooth progress
  loadingTimer = setInterval(() => {
    progressValue += 6 + Math.random() * 4;
    if (progressValue >= 100) {
      progressValue = 100;
      clearInterval(loadingTimer);
      setTimeout(showMainContent, 600);
    }
    progress.style.width = progressValue + '%';
  }, 140);
}

function showMainContent() {
  if (!hasFailed) {
    loadingScreen.classList.add('hidden');
    setTimeout(() => {
      mainContent.classList.add('visible');
      // reveal home button when content visible
      if (homeButton) homeButton.style.pointerEvents = 'auto';
    }, 400);
  }
}

function triggerFailure() {
  if (!hasFailed) {
    hasFailed = true;
    clearInterval(loadingTimer);
    errorMessage.classList.add('visible');
    retryBtn.classList.add('visible');
    progress.style.width = '92%'; 
  }
}

retryBtn.addEventListener('click', startLoading);
startLoading();

setTimeout(() => {
  if (progressValue < 94) triggerFailure();
}, 10000 + Math.random() * 4000);

document.getElementById('application-form').addEventListener('submit', function(e) {
  e.preventDefault();
  const form = e.currentTarget;
  const btn = document.getElementById('submit-btn');
  const success = document.getElementById('status-success');
  const error = document.getElementById('status-error');
  success.classList.remove('visible'); error.classList.remove('visible');
  btn.disabled = true; btn.textContent = 'SENDING...';

  const data = new FormData(form);
  fetch(form.action, {
    method: form.method || 'POST',
    body: data,
    headers: { 'Accept': 'application/json' }
  }).then(resp => {
    if (resp.ok) {
      success.classList.add('visible');
      form.reset();
      btn.textContent = 'SENT';
      setTimeout(() => { btn.disabled = false; btn.textContent = 'SUBMIT APPLICATION'; success.classList.remove('visible'); }, 3500);
    } else {
      return resp.json().then(j => { throw j; });
    }
  }).catch(() => {
    error.classList.add('visible');
    btn.disabled = false; btn.textContent = 'SUBMIT APPLICATION';
  });
});
</script>

</body>
</html>
